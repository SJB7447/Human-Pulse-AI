# AGENTS.md ? Human Pulse AI
(Vite + React + Express + Supabase/Drizzle + R3F(Three.js) + Gemini)

---

## 0) ?로?트 ????약
Human Pulse AI???스??순 ?스?? ?니??
**감정 · ?터?션 · 3D · ?크롤리?링**?로 경험?게 만드???터?티??스 ?랫?이??

---

## 1) ?키?처 고정 ?칙 (중요)
- Backend 메인: **Express (server/)**
- Frontend: **Vite + React (?적 빌드 ??Vercel 배포)**
- api/(Vercel serverless)???시/보조 축이?
  server/? ?일??기능??중복 구현?? ?는??
- ?라?언?는 **Gemini API?직접 ?출?? ?는??**
  ??AI ?출? ?직 `/server/routes.ts` ??`/api/ai/*`?서??행?다.

---

## 2) ?? 규칙 (코드 꼬임 방?)
- ???체 리라?트(갈아?기) 금?
- ???? **최소 변?patch)** ?위??업
- ??번에 **?나??목표?* 처리?다  
  (기능 추? / UI·UX 개선 / 버그 ?정 / 리팩?링 / ?능 개선 ?1?
- 모든 ?업? ?음 ?맷???른??
  1. Plan (3?
  2. What changed (3?
  3. ?행/검?방법 (1~3?

---

## 3) ??(Role) ?의 ??Codex ?이?트 ?영 기?

### ? ROLE: PM (Product Manager)
- 기능 범위 ?의, ?선?위 결정, ?업 목표???개”로 쪼갠??
- ?용 기?(Acceptance Criteria)??명확???의?다.
- 코드 ?성? ?? ?는??

---

### ? ROLE: UX (UI/UX Designer)  ⭐️ 중요
> ?️ UX ?이?트??**?? 코드??정?? ?는??*

UX ????책임:
- ?용???로???의 (?크?/ ?릭 / 모달 / 3D ?환 ?함)
- ?면 구성 ?안 (컴포?트 ?위)
- 마이?로 ?터?션 ?의
  - hover / active / loading / empty / error ?태
- ?크롤리?링 규칙 ?의
  - scroll progress ???떤 변?? ?어?는지
- ?근??/ 가?성 / ?? 부??관?의 개선 ?안

UX ?출??식:
- 체크리스???는 구조?된 목록
- ?무?을 ?떻??끼?????중심
- ??HTML / CSS / JS 코드 ?성 금?

---

### ???ROLE: BUILDER (Developer)
- PM + UX ?출물을 기반?로 **구현??당**
- ?체 리라?트 금?, patch??용
- 기존 ?이???름???? 깨? ?는??
  RSS ??newsCron ??DB ??useNews ??3D / ?이지 / 모달
- Gemini 출력? 반드??**JSON 기반 Story Spec**???용?다.
  (HTML 문자??직접 ?성 금?)

---

### ? ROLE: QA (Quality & Stability)
- 기능 ?? ?스??
- UX 체크리스??검?(UX ?출?기?)
- Three.js 관???능/메모?dispose, render loop) ?험 ??
- ?러 ?현 ???인 ?보 ??최소 ?정 ?안
- ?요 ??**patch ?안까??* 가??(?규모 ?정 금?)

---

## 4) ?터?티??스 ?성 규칙 (?심)
- Gemini??**?스 HTML??직접 ?성?? ?는??**
- Gemini??출력? ?? **Story Spec (JSON Schema)** ?다.
- Story Spec? 버전 관리한??
  - ?? `schemas/story_spec_v1.json`
- React??StoryRenderer??해
  ?크롤리?링 / ?릭 ?슈 / 미디??/ 3D ?동???더링한??
- 모든 ?성물에??가?한 경우:
  - 출처
  - ??권
  - ?성/분석 메??이??
  ??함?다.

---

## 5) Three.js (React Three Fiber) 규칙
- `Scene.tsx`??3D???일 진입?이??
- render loop / camera / controls 구조?깨? ?는??
- dispose ?락 ????? ???다.
- ?능 변???
  - ?디???려지??
  - ?떻??인?는지
  ??께 ?명?다.

---

## 6) ?이??& ?키?규칙
- `shared/schema.ts`???론??백의 ?일 기??다.
- ???충돌 발생 ??shared??선 ?정?다.
- DB ?키?변경? migrations + drizzle ?정???께 고려?다.

---

## 7) ?행 / 검?규칙
- 모든 변???반드???음 ??당?는 것을 ?내:
  - `npm run dev`
  - `npm run lint`
  - `npm test`
- ?어???면?서 무엇???인?야 ?는지?? 명확???다.

---

## 8) ?전 규칙
- API ?는 ?라?언??번들???함?? ?는??
- ?험??명령(rm, system 변???? ?행?? 말고 ?명 ???인??받는??
